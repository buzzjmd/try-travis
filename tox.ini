[tox]
envlist = 
    clean-cov
    lint
    py{2,3}
    report

[pytest]
testpaths = tests

[testenv]
#skip_install = false
usedevelop=true
whitelist_externals =
    find
    rm
deps =
    pytest
    pytest-cov
passenv =
    *
commands =
    python --version
    {posargs:pytest --verbose --cov --cov-append --cov-report=term-missing}

[testenv:lint]
skip_install = true
usedevelop = True
deps =
    flake8
    isort
commands =
    python --version
    flake8 src tests setup.py 
    #isort --verbose --check-only --diff --recursive src tests setup.py
    isort --check-only --diff --recursive src tests setup.py

[testenv:report]
skip_install = true
usedevelop = True
deps =
    coverage
commands =
    coverage html

[testenv:clean-cov]
skip_install = true
usedevelop = True
deps =
    coverage
commands = 
    # Remove coverage artifacts
    coverage erase
    find . -type d -name 'htmlcov' -exec rm -rf \{\} +
